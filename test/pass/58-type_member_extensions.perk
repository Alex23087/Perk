import "stdio.h"

type List = Nil | Cons(int, List)

fun List.foreach (self: List, pred: (int) => bool): bool {
    match (self) {
        Nil {
            return true
        },
        Cons (var hd, var tl) {
            if (pred(hd)) {
                return tl.foreach(pred)
            } else {
                return false
            }
        }
    }
}

type_fun List.make_empty(): List {
    return Nil;
}

fun main() : void {
    printf("%s", if 
        List.make_empty().foreach(
            (a: int): bool {
                return false
            }
        ) then "success" else "failure"
    );
}